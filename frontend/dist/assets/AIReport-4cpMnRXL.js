import{_ as R,u as B,j as N,o as l,c as a,a as e,b as o,w as n,m as q,r as i,f as k,h as D,t as d,F as w,n as x,d as F,e as E}from"./index-D_A4Kxuy.js";const U={class:"ai-report-container"},W={class:"report-card"},j={key:0,class:"report-content"},L={class:"score-section"},M={class:"score-card"},T={class:"total-score"},$={class:"score-details"},z={class:"score-item"},G={class:"score-item"},H={class:"score-item"},J={class:"summary-section"},K={class:"summary-item"},O={class:"summary-value"},P={class:"summary-item"},Q={class:"summary-value"},X={class:"summary-item"},Y={class:"summary-value"},Z={class:"issues-suggestions"},ss={class:"issues-section"},es={key:0},ts={key:1,class:"no-issues"},os={class:"suggestions-section"},ls={key:0},as={key:1,class:"no-suggestions"},ns={class:"recommended-section"},rs={class:"recommended-hours"},is={class:"hours-value"},cs={key:1,class:"loading-report"},ds={__name:"AIReport",setup(us){const y=B(),g=k(new Date),t=k(null),_=k(""),f=async()=>{var r,s;try{_.value="";const c=await q.ai.getWeeklyReport({week_date:g.value});t.value=c.data.data}catch(c){_.value=((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.message)||"生成报告失败，请稍后重试",console.error("生成报告失败:",c)}},p=r=>r>=80?"#67C23A":r>=60?"#E6A23C":"#F56C6C",C=r=>`${r}分`;return N(async()=>{y.isAuthenticated&&!y.user&&await y.fetchUserInfo(),f()}),(r,s)=>{const c=i("el-date-picker"),b=i("el-form-item"),A=i("el-button"),V=i("el-form"),v=i("el-progress"),u=i("el-card"),S=i("el-empty"),I=i("el-alert");return l(),a("div",U,[s[15]||(s[15]=e("h1",{class:"page-title"},"AI学习评估",-1)),e("div",W,[o(u,{"body-style":{padding:"30px"}},{default:n(()=>[s[14]||(s[14]=e("h2",{class:"card-title"},"本周学习报告",-1)),o(V,{inline:!0,class:"week-form"},{default:n(()=>[o(b,{label:"周开始日期"},{default:n(()=>[o(c,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=m=>g.value=m),type:"date",placeholder:"选择周开始日期",onChange:f},null,8,["modelValue"])]),_:1}),o(b,null,{default:n(()=>[o(A,{type:"primary",onClick:f},{default:n(()=>[...s[1]||(s[1]=[D(" 生成报告 ",-1)])]),_:1})]),_:1})]),_:1}),t.value?(l(),a("div",j,[e("div",L,[s[5]||(s[5]=e("h3",{class:"section-title"},"学习评分",-1)),e("div",M,[e("div",T,[o(v,{type:"dashboard",percentage:t.value.score.total,color:p(t.value.score.total),format:C,"stroke-width":15,width:150},null,8,["percentage","color"])]),e("div",$,[e("div",z,[s[2]||(s[2]=e("span",{class:"score-label"},"打卡频率",-1)),o(v,{percentage:t.value.score.frequency,color:p(t.value.score.frequency)},null,8,["percentage","color"])]),e("div",G,[s[3]||(s[3]=e("span",{class:"score-label"},"学习时长",-1)),o(v,{percentage:t.value.score.duration,color:p(t.value.score.duration)},null,8,["percentage","color"])]),e("div",H,[s[4]||(s[4]=e("span",{class:"score-label"},"学习稳定性",-1)),o(v,{percentage:t.value.score.stability,color:p(t.value.score.stability)},null,8,["percentage","color"])])])])]),e("div",J,[s[9]||(s[9]=e("h3",{class:"section-title"},"学习总结",-1)),o(u,{"body-style":{padding:"20px"},class:"summary-card"},{default:n(()=>[e("div",K,[s[6]||(s[6]=e("span",{class:"summary-label"},"打卡频率：",-1)),e("span",O,d(t.value.summary.checkin_frequency),1)]),e("div",P,[s[7]||(s[7]=e("span",{class:"summary-label"},"学习趋势：",-1)),e("span",Q,d(t.value.summary.learning_trend),1)]),e("div",X,[s[8]||(s[8]=e("span",{class:"summary-label"},"稳定性：",-1)),e("span",Y,d(t.value.summary.stability_level),1)])]),_:1})]),e("div",Z,[e("div",ss,[s[10]||(s[10]=e("h3",{class:"section-title"},"存在问题",-1)),o(u,{"body-style":{padding:"20px"},class:"issues-card"},{default:n(()=>[t.value.issues&&t.value.issues.length>0?(l(),a("ul",es,[(l(!0),a(w,null,x(t.value.issues,(m,h)=>(l(),a("li",{key:h,class:"issue-item"},d(m),1))),128))])):(l(),a("p",ts,"暂无问题"))]),_:1})]),e("div",os,[s[11]||(s[11]=e("h3",{class:"section-title"},"改进建议",-1)),o(u,{"body-style":{padding:"20px"},class:"suggestions-card"},{default:n(()=>[t.value.suggestions&&t.value.suggestions.length>0?(l(),a("ul",ls,[(l(!0),a(w,null,x(t.value.suggestions,(m,h)=>(l(),a("li",{key:h,class:"suggestion-item"},d(m),1))),128))])):(l(),a("p",as,"暂无建议"))]),_:1})])]),e("div",ns,[s[13]||(s[13]=e("h3",{class:"section-title"},"推荐学习时长",-1)),o(u,{"body-style":{padding:"20px"},class:"recommended-card"},{default:n(()=>[e("div",rs,[s[12]||(s[12]=e("span",{class:"hours-label"},"建议每日学习时长：",-1)),e("span",is,d(t.value.recommended_hours)+" 小时",1)])]),_:1})])])):(l(),a("div",cs,[o(S,{description:"点击生成报告"})])),_.value?(l(),F(I,{key:2,type:"error",title:_.value,"show-icon":"",class:"error-alert"},null,8,["title"])):E("",!0)]),_:1})])])}}},_s=R(ds,[["__scopeId","data-v-f48cd242"]]);export{_s as default};

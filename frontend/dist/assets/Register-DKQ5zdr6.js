import{_ as C,u as P,o as c,c as q,a as B,b as l,w as o,d as v,e as b,r as u,f as m,g as F,h as V,i as N}from"./index-DnlmHtx4.js";const U={class:"register-form"},T={__name:"Register",setup(E){const f=F(),y=P(),p=m(null),g=m(!1),n=m(""),i=m(""),r=N({username:"",email:"",password:"",confirmPassword:""}),h={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(d,e,s)=>{e!==r.password?s(new Error("两次输入密码不一致")):s()},trigger:"blur"}]},k=async()=>{var d,e;if(p.value)try{await p.value.validate(),g.value=!0,n.value="",i.value="",await y.register(r.username,r.email,r.password),i.value="注册成功，请登录",setTimeout(()=>{f.push("/auth/login")},1500)}catch(s){n.value=((e=(d=s.response)==null?void 0:d.data)==null?void 0:e.detail)||"注册失败，请稍后重试"}finally{g.value=!1}},x=()=>{f.push("/auth/login")};return(d,e)=>{const s=u("el-input"),t=u("el-form-item"),w=u("el-button"),R=u("el-form"),_=u("el-alert");return c(),q("div",U,[e[6]||(e[6]=B("h2",{class:"form-title"},"注册",-1)),l(R,{model:r,rules:h,ref_key:"registerFormRef",ref:p,"label-width":"80px",class:"demo-ruleForm"},{default:o(()=>[l(t,{label:"用户名",prop:"username"},{default:o(()=>[l(s,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(t,{label:"邮箱",prop:"email"},{default:o(()=>[l(s,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=a=>r.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(t,{label:"密码",prop:"password"},{default:o(()=>[l(s,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.password=a),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),l(t,{label:"确认密码",prop:"confirmPassword"},{default:o(()=>[l(s,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.confirmPassword=a),type:"password",placeholder:"请确认密码","show-password":""},null,8,["modelValue"])]),_:1}),l(t,null,{default:o(()=>[l(w,{type:"primary",class:"register-btn",onClick:k,loading:g.value},{default:o(()=>[...e[4]||(e[4]=[V(" 注册 ",-1)])]),_:1},8,["loading"]),l(w,{onClick:x},{default:o(()=>[...e[5]||(e[5]=[V(" 去登录 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),n.value?(c(),v(_,{key:0,type:"error",title:n.value,"show-icon":"",class:"error-alert"},null,8,["title"])):b("",!0),i.value?(c(),v(_,{key:1,type:"success",title:i.value,"show-icon":"",class:"success-alert"},null,8,["title"])):b("",!0)])}}},A=C(T,[["__scopeId","data-v-1670e53f"]]);export{A as default};

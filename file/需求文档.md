# **StudySync 应用需求文档（V1）**

---

## **一、项目概述**

**项目名称**：StudySync
**项目定位**：帮助个人/学习小组进行目标制定、打卡监督、进度可视化与 AI 学习评估的 Web 应用

**核心价值**：

* 让个人有清晰的学习计划和可视化进度
* 让多人学习形成互相监督的氛围
* 通过 AI 分析学习行为，提供个性化改进建议
* 通过自动化工作流（n8n）减少人工管理成本

---

## **二、功能需求**

### **1. 个人学习模式（必做）**

用户可以：

* 创建学习计划（例如：每天学习 2 小时 Python）
* 设定每日打卡目标（例如：完成 2 小时学习）
* 每天进行打卡（记录学习时长/内容）
* 查看自己的学习进度可视化（折线图、进度条）

### **2. 多人学习群聊模式（必做）**

用户可以：

* 创建学习群组（如：算法刷题小组）
* 设定群组每日打卡规则（如：每天至少 1 次打卡）
* 邀请其他用户加入群组
* 群组成员每日打卡
* **超过 3 天未打卡的成员，自动移出群组（通过 n8n 自动化）**

### **3. AI 学习评估（V1 先接本地大模型）**

每周自动分析用户的学习情况，包括：

* 打卡频率
* 学习时长趋势
* 学习稳定性

AI 输出：

* 本周学习强度评分（0-100）
* 本周学习问题总结（如前松后紧、打卡不稳定等）
* 下周改进建议（如建议每天 1.5 小时，更稳定）

> **V1 版本**：优先接入本地部署的大模型（如 Ollama + Llama / Qwen / ChatGLM）

---

## **三、系统架构**

### **技术选型**

| 层级  | 技术              |
| --- | --------------- |
| 前端  | Vue 3 + Vite    |
| 后端  | FastAPI         |
| 数据库 | PostgreSQL      |
| AI  | 本地大模型           |
| 自动化 | n8n（处理定时任务与工作流） |

**整体架构图（文字版）**：

```
       Vue 前端
          ↓ (REST API)
      FastAPI 后端
          ↓
    PostgreSQL 数据库
          ↓
      本地 AI 大模型
          ↑
          |
         n8n 自动化任务
    （每日踢人、每周生成 AI 报告）
```

---

## **四、核心 API 设计（FastAPI）**

### **用户相关**

* POST /auth/register —— 注册
* POST /auth/login —— 登录
* GET /users/me —— 获取当前用户信息

### **计划相关**

* POST /plans —— 创建学习计划
* GET /plans —— 获取我的计划

### **打卡相关**

* POST /checkins —— 提交打卡
* GET /checkins?date=YYYY-MM-DD —— 查询某天打卡

### **群组相关**

* POST /groups —— 创建群组
* POST /groups/{group_id}/join —— 加入群组
* GET /groups/{group_id}/members —— 查看成员
* DELETE /groups/{group_id}/members/{user_id} —— 移除成员（供 n8n 自动化调用）

### **AI 相关**

* GET /ai/weekly_report —— 获取本周 AI 学习分析

---

## **五、前端功能（Vue）**

### **页面结构**

1. **登录/注册页**
2. **个人主页**

   * 显示今日是否已打卡
   * 显示本周学习进度图表
3. **打卡页面**

   * 输入学习时长
   * 输入学习内容
4. **群组页面**

   * 查看群成员打卡情况
   * 显示谁已打卡/谁未打卡
5. **AI 报告页面**

   * 显示 AI 评分
   * 显示学习建议

---

## **六、技术要求（前后端分离版）**

### **1️⃣ 总体原则**

* 前端与后端 **完全分离**

  * 前端通过 **RESTful API** 与后端通信
  * 后端只提供数据接口，不渲染页面

---

### **2️⃣ 前端（Vue 3 + Vite）**

* **完全依赖接口**获取数据，不做模板渲染
* **组件化开发**：每个功能模块独立组件
* **状态管理**：Pinia 或 Vuex
* **API 调用**：统一封装请求模块，支持 token 自动注入
* **页面路由**：登录/注册页、个人主页、打卡页、群组页、AI报告页
* **UI / 图表**：Element Plus + ECharts
* **响应式布局**：支持桌面端和移动端访问

---

### **3️⃣ 后端（FastAPI）**

* **纯接口服务**：不渲染 HTML/CSS/JS
* **接口设计**：RESTful 风格，支持分页、筛选、日期查询
* **认证与权限**：JWT Token 认证，敏感接口验证用户身份
* **数据验证**：Pydantic 模型
* **跨域支持**：配置 CORS

---

### **4️⃣ 数据库（PostgreSQL）**

* 数据库独立部署
* 后端通过 ORM（SQLAlchemy）访问
* 外键、索引、唯一约束保证数据完整性
* 支持事务保证打卡、踢人等操作原子性

---

### **5️⃣ 自动化与定时任务（n8n）**

* **n8n 低代码工作流**负责自动化操作
* **每日任务**：

  * 检查群组成员打卡情况
  * 超过 3 天未打卡的成员自动调用后端 API 移出群组
* **每周任务**：

  * 聚合用户本周打卡数据
  * 调用本地 AI 模型生成学习报告
  * 保存至后端 API，供前端展示
* **安全**：

  * 调用后端 API 需使用 **API Key 或 Token**
* **可扩展性**：

  * 可加入邮件/消息提醒、数据备份等自动化任务

---

## **七、V1 里程碑**

**MVP 目标**：

* 用户注册/登录
* 个人打卡功能
* 群组创建 + 自动踢人
* 本地 AI 生成周报
* Vue 基础可视化界面
* n8n 自动化任务调度

